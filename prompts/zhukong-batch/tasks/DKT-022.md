请进入主控模式，执行任务 DKT-022（Implement compaction keep/drop policy）。

【项目根目录】
/Users/huluobo/workSpace/DAOKit

【上下文文件（先读）】
- /Users/huluobo/workSpace/DAOKit/specs/002-observer-relay-bilingual-docs/requirements.md
- /Users/huluobo/workSpace/DAOKit/specs/002-observer-relay-bilingual-docs/design.md
- /Users/huluobo/workSpace/DAOKit/specs/002-observer-relay-bilingual-docs/tasks.md
- /Users/huluobo/workSpace/DAOKit/docs/observer-relay-feasibility.md
- /Users/huluobo/workSpace/DAOKit/docs/observer-relay-persona-and-compaction.md
- /Users/huluobo/workSpace/DAOKit/docs/observer-relay-optimization-plan.md

【任务锚点】
- Task ID: DKT-022
- Title: Implement compaction keep/drop policy
- Dependencies: DKT-021

【Goal】
Enforce context hygiene to keep observer relay high-performance and high-availability.

【Concrete Actions】
1) Implement keep/drop compaction policy from observer relay docs
2) Integrate policy at pre-compact hook boundary
3) Add dedup for repeated status, failure noise, and API error garbage

【Acceptance Criteria】
1) Required relay context remains after compaction
2) Stale logs and repeated noise are removed
3) Compaction is idempotent across repeated runs

【Allowed Scope（超出即拒绝）】
- src/hooks/ src/skills/ src/orchestrator/ tests/hooks/ tests/orchestrator/ docs/observer-relay-persona-and-compaction.md

【Verification Baseline】
- make lint && make test

【Verification Log 格式契约】
1) verification.log 必须有命令证据。
2) 允许以下任一格式被验收器识别：
   - Command: <cmd>
   - === COMMAND ENTRY N START/END ===
3) 为避免解析器差异，建议每个 COMMAND ENTRY 块内同时写一行 Command: <cmd>。

【硬约束】
1) 主控不得直接改文件、不得直接执行有副作用命令。
2) 只能通过本地 shim 派发 subagent。
3) 验收仅基于 artifacts 与命令日志，不接受口头声明。
4) 如不满足验收标准，必须输出差分 rework JSON 并继续迭代。
5) 每个任务最多 3 轮 rework，超限即标记 FAILED 并报告阻塞。
6) 不得更改 CLI 对外参数名；不得破坏 schema_version=1.0.0 语义。
7) 不得破坏 v1.0.0-rc1 锚点语义与 docs/reports/final-run/ 证据结构。
8) 如基线验证命令缺失，允许等价替代命令，但必须在 verification.log 说明替代关系与覆盖范围。

【最终输出（只输出一次）】
- Task ID
- Status: SUCCESS | FAILED
- Summary
- Files Changed
- Commands Executed
- Verification Results
- Risks / Limitations
- Next Step Suggestion
